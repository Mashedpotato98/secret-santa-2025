[gd_scene load_steps=17 format=3 uid="uid://kxmwduvgdusb"]

[ext_resource type="Script" uid="uid://ctqxqg3psi2jb" path="res://player_type/big_guy/big_guy.gd" id="1_buqfc"]
[ext_resource type="Texture2D" uid="uid://canfkibwbioyh" path="res://assets/big_guy/big_guy.png" id="2_ngess"]
[ext_resource type="PackedScene" uid="uid://bm4pld2vgml0m" path="res://player_type/big_guy/weapon/big_weapon.tscn" id="3_ilc6v"]
[ext_resource type="PackedScene" uid="uid://cw6vrpa8b0u16" path="res://components/hurtbox.tscn" id="4_m8ldj"]
[ext_resource type="Texture2D" uid="uid://c52k1xbaarrpx" path="res://assets/effects/light_.png" id="4_tx5gx"]
[ext_resource type="PackedScene" uid="uid://bwsmr01fo5ush" path="res://components/knockback_receiver.tscn" id="5_ngess"]
[ext_resource type="Texture2D" uid="uid://dupdohro8bqh5" path="res://assets/ui/health_bar/over.png" id="5_obsep"]
[ext_resource type="Texture2D" uid="uid://nu6i7ckhkjvu" path="res://assets/ui/health_bar/2nd/under.png" id="5_ucvqr"]
[ext_resource type="Texture2D" uid="uid://cjpykjsjf1e6q" path="res://assets/ui/health_bar/2nd/progress2.png" id="6_ucvqr"]
[ext_resource type="AudioStream" uid="uid://dugfl5fyolqb4" path="res://assets/sounds/big_guy_hit/hit_player_mouth.wav" id="9_alecs"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jn63w"]
size = Vector2(32, 32)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m8ldj"]
size = Vector2(32, 32)

[sub_resource type="Animation" id="Animation_alecs"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/health_bar:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_ucvqr"]
resource_name = "hit"

[sub_resource type="Animation" id="Animation_obsep"]
resource_name = "show_health"
length = 1.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/health_bar:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.10000001, 0.20000002, 1, 1.1, 1.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 0.4862745), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_obsep"]
_data = {
&"RESET": SubResource("Animation_alecs"),
&"hit": SubResource("Animation_ucvqr"),
&"show_health": SubResource("Animation_obsep")
}

[node name="Big_guy" type="CharacterBody2D" groups=["big_guy"]]
collision_mask = 8
script = ExtResource("1_buqfc")
shoot_speed = 30

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(-1, 0)
texture = ExtResource("2_ngess")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_jn63w")

[node name="Big_weapon" parent="." node_paths=PackedStringArray("big_guy") instance=ExtResource("3_ilc6v")]
position = Vector2(21, -1)
big_guy = NodePath("..")

[node name="Line2D" type="Line2D" parent="Big_weapon"]
position = Vector2(74, 2)
points = PackedVector2Array(2500, 0, 0, 0)
width = 20.0
default_color = Color(0.36862746, 0.003921569, 0.10980392, 0.07450981)

[node name="PointLight2D" type="PointLight2D" parent="Big_weapon"]
top_level = true
position = Vector2(2094.25, 2.500001)
scale = Vector2(31.128906, 0.734375)
color = Color(0.36862746, 0.003921569, 0.10980392, 1)
shadow_enabled = true
texture = ExtResource("4_tx5gx")

[node name="hurtbox" parent="." node_paths=PackedStringArray("owner_node") instance=ExtResource("4_m8ldj")]
visible = false
collision_layer = 1
max_hp = 10
owner_node = NodePath("..")

[node name="CollisionShape2D" parent="hurtbox" index="0"]
shape = SubResource("RectangleShape2D_m8ldj")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
visible = false
offset_right = 40.0
offset_bottom = 23.0

[node name="health_bar" type="TextureProgressBar" parent="CanvasLayer"]
modulate = Color(1, 1, 1, 0)
offset_top = 94.0
offset_right = 256.0
offset_bottom = 158.0
max_value = 10.0
texture_under = ExtResource("5_obsep")
texture_over = ExtResource("5_ucvqr")
texture_progress = ExtResource("6_ucvqr")

[node name="knockback_receiver" parent="." node_paths=PackedStringArray("body") instance=ExtResource("5_ngess")]
visible = false
body = NodePath("..")

[node name="health_animation" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_obsep")
}

[node name="hit" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_alecs")
bus = &"player_sounds"

[connection signal="got_hit" from="hurtbox" to="." method="_on_hurtbox_got_hit"]
[connection signal="killed" from="hurtbox" to="." method="_on_hurtbox_killed"]
[connection signal="knockback_values" from="hurtbox" to="." method="_on_hurtbox_knockback_values"]

[editable path="hurtbox"]
