[gd_scene load_steps=10 format=3 uid="uid://dhh663hd246p3"]

[ext_resource type="Script" uid="uid://ckqgteahex3nn" path="res://enemies/Boss.gd" id="1_n18ml"]
[ext_resource type="Script" uid="uid://dyhp2nkv0oyxm" path="res://components/state_machine.gd" id="1_ubujh"]
[ext_resource type="PackedScene" uid="uid://brvcncdhx4gpu" path="res://components/entity_spawner.tscn" id="3_r4ron"]
[ext_resource type="Script" uid="uid://ciyvb0x1ucnxy" path="res://enemies/boss/states/boss_bullet_wave.gd" id="4_8d0e3"]
[ext_resource type="Script" uid="uid://c62d321qpdq1l" path="res://enemies/boss/states/boss_minions.gd" id="4_vsebo"]
[ext_resource type="Texture2D" uid="uid://dfjytk3v5veer" path="res://icon.svg" id="5_h4k8w"]
[ext_resource type="PackedScene" uid="uid://cisu123oaaq3q" path="res://player_type/big_guy/weapon/bullet.tscn" id="6_auiwu"]
[ext_resource type="PackedScene" uid="uid://7apob1ku4abi" path="res://enemies/tank_melee/tank_melee.tscn" id="6_opohk"]
[ext_resource type="PackedScene" uid="uid://cw6vrpa8b0u16" path="res://components/hurtbox.tscn" id="9_2tiri"]

[node name="Boss" type="CharacterBody2D"]
script = ExtResource("1_n18ml")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]

[node name="state_machine" type="Node2D" parent="CollisionShape2D" node_paths=PackedStringArray("initial_state")]
visible = false
script = ExtResource("1_ubujh")
initial_state = NodePath("bossMinion")
metadata/_custom_type_script = "uid://dyhp2nkv0oyxm"

[node name="bossBulletWave" type="Node" parent="CollisionShape2D/state_machine" node_paths=PackedStringArray("bullet_spawner", "owner_node")]
script = ExtResource("4_8d0e3")
bullet_spawner = NodePath("../../../entity_spawner")
spawn_cooldown = 0.5
owner_node = NodePath("../../..")
metadata/_custom_type_script = "uid://ciyvb0x1ucnxy"

[node name="bossMinion" type="Node" parent="CollisionShape2D/state_machine" node_paths=PackedStringArray("minion_spawner", "owner_node")]
script = ExtResource("4_vsebo")
minion_spawner = NodePath("../../../entity_spawner")
owner_node = NodePath("../../..")
metadata/_custom_type_script = "uid://c62d321qpdq1l"

[node name="Sprite2D" type="Sprite2D" parent="."]
visible = false
texture = ExtResource("5_h4k8w")

[node name="entity_spawner" parent="." node_paths=PackedStringArray("father") instance=ExtResource("3_r4ron")]
position = Vector2(101, 81)
load_bullet = ExtResource("6_auiwu")
minion = ExtResource("6_opohk")
alpha = 1.0
father = NodePath("..")

[node name="hurtbox" parent="." instance=ExtResource("9_2tiri")]
visible = false
collision_layer = 4
collision_mask = 0
max_hp = 25

[node name="CollisionShape2D2" type="CollisionShape2D" parent="hurtbox"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="health_bar" type="ProgressBar" parent="CanvasLayer"]
offset_right = 474.0
offset_bottom = 27.0
max_value = 25.0
show_percentage = false

[node name="Camera2D" type="Camera2D" parent="."]

[connection signal="timer_finished" from="entity_spawner" to="CollisionShape2D/state_machine/bossBulletWave" method="_on_bullet_spawner_timer_finished"]
[connection signal="timer_finished" from="entity_spawner" to="CollisionShape2D/state_machine/bossMinion" method="_on_bullet_spawner_timer_finished"]
[connection signal="got_hit" from="hurtbox" to="." method="_on_hurtbox_got_hit"]
